<h4>{{ _('Filament Sensor Universal') }}</h4>
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label">{{ _('Runout Sensor GPIO Chip:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('GPIO chip containing the filament sensor pin') }}">
            <select class="select-mini" data-bind="value: settings.plugins.filamentsensoruniversal.runout_chip">
                <option value="">Disabled</option>
                {% for chip in plugin_filamentsensoruniversal_chips %}
                    <option value={{ chip['name'] }}>{{ chip['name'] }} ({{ chip['label'] }})</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Runout Sensor GPIO Pin:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('GPIO pin connected to the filament sensor') }}">
            <input type="number" step="any" min="0" class="input-mini text-right" data-bind="value: settings.plugins.filamentsensoruniversal.runout_pin">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Runout Sensor Debounce Time:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('When a sensor state change happens, wait for this amount of time to wait for the signal to stabilize.') }}">
            <input type="number" step="any" min="0" class="input-mini text-right" data-bind="value: settings.plugins.filamentsensoruniversal.runout_bounce">
            <span class="add-on">ms</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Runout Sensor Switch Type:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('Whether the sensor should trip when the switch goes HIGH or LOW, Normally Open is LOW when filament is present, and Normally Closed is HIGH when filament is present.') }}">
            <select class="select-mini" data-bind="value: settings.plugins.filamentsensoruniversal.runout_switch">
                <option value=0>{{ _('Normally Open') }}</option>
                <option value=1>{{ _('Normally Closed') }}</option>
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Out of filament GCODE:') }}</label>
        <div class="controls">
            <textarea rows="4" class="block" data-bind="value: settings.plugins.filamentsensoruniversal.no_filament_gcode"></textarea>
        </div>
    </div>
    <div class="control-group">
        <div class="controls" data-toggle="tooltip" title="{{ _('Beware that for some printers, pausing is incompatible with M600 (Filament change pause) as both will move the print head and it can resume at a different position as it paused.') }}">
            <label class="checkbox">
                <input type="checkbox" data-bind="checked: settings.plugins.filamentsensoruniversal.runout_pause_print"> {{ _('Pause print when out of filament') }}
            </label>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label">{{ _('Jam Sensor GPIO Chip:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('GPIO chip containing the jam sensor pin') }}">
            <select class="select-mini" data-bind="value: settings.plugins.filamentsensoruniversal.jam_chip">
                <option value="">Disabled</option>
                {% for chip in plugin_filamentsensoruniversal_chips %}
                    <option value={{ chip['name'] }}>{{ chip['name'] }} ({{ chip['label'] }})</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Jam Sensor GPIO Pin:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('GPIO pin connected to the jam sensor') }}">
            <input type="number" step="any" min="0" class="input-mini text-right" data-bind="value: settings.plugins.filamentsensoruniversal.jam_pin">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Jam Sensor Debounce Time:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('When a sensor state change happens, wait for this amount of time to wait for the signal to stabilize.') }}">
            <input type="number" step="any" min="0" class="input-mini text-right" data-bind="value: settings.plugins.filamentsensoruniversal.jam_bounce">
            <span class="add-on">ms</span>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Jam Sensor Switch Type:') }}</label>
        <div class="controls" data-toggle="tooltip" title="{{ _('Whether the sensor should trip when the switch goes HIGH or LOW, Normally Open is LOW when filament is present, and Normally Closed is HIGH when filament is present.') }}">
            <select class="select-mini" data-bind="value: settings.plugins.filamentsensoruniversal.jam_switch">
                <option value=0>{{ _('Normally Open') }}</option>
                <option value=1>{{ _('Normally Closed') }}</option>
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label">{{ _('Filament Jammed GCODE:') }}</label>
        <div class="controls">
            <textarea rows="4" class="block" data-bind="value: settings.plugins.filamentsensoruniversal.jammed_gcode"></textarea>
        </div>
    </div>
    <div class="control-group">
        <div class="controls" data-toggle="tooltip" title="{{ _('Beware that for some printers, pausing is incompatible with M600 (Filament change pause) as both will move the print head and it can resume at a different position as it paused.') }}">
            <label class="checkbox">
                <input type="checkbox" data-bind="checked: settings.plugins.filamentsensoruniversal.jammed_pause_print"> {{ _('Pause print when filament is jammed') }}
            </label>
        </div>
    </div>

</form>
